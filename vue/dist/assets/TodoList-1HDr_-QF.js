import{c as r,o as l,a as e,r as h,w as M,b as _,v as F,d as H,t as b,e as V,f as Z,g as S,h as y,i as x,u as w,F as z,j as B,n as L,k as N,l as Q,m as D,p as q,q as J}from"./index-Dt7Sfm37.js";function R(n,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z","clip-rule":"evenodd"})])}function W(n,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule":"evenodd"})])}function Y(n,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),e("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"})])}function G(n,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function K(n,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"})])}function X(n,c){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z","clip-rule":"evenodd"})])}const ee={class:"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm relative"},te={class:"flex items-center space-x-2"},oe={class:"flex justify-end space-x-2"},se=["disabled"],ne={__name:"TodoForm",props:{todo:{type:Object,default:null}},emits:["submit","close"],setup(n,{emit:c}){const g=n,a=c,p=h(""),i=h(""),v=h(!1);M(()=>g.todo,o=>{o?(p.value=o.title||"",i.value=o.description||"",v.value=o.completed||!1):(p.value="",i.value="",v.value=!1)},{immediate:!0});function u(){a("submit",{id:g.todo?.id,title:p.value,description:i.value,completed:v.value})}return(o,t)=>(l(),r("div",{class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t[5]||(t[5]=V(d=>a("close"),["self"]))},[e("div",ee,[e("button",{onClick:t[0]||(t[0]=d=>a("close")),class:"cursor-pointer absolute top-3 right-4 text-gray-500 hover:text-gray-700"}," × "),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>p.value=d),type:"text",placeholder:"Title",class:"w-full font-bold text-lg mb-4 focus:outline-none"},null,512),[[F,p.value]]),_(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=d=>i.value=d),placeholder:"Description",class:"w-full pb-20 focus:outline-none"},null,512),[[F,i.value]]),e("label",te,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=d=>v.value=d),class:"form-checkbox h-5 w-5 text-green-500"},null,512),[[H,v.value]]),t[6]||(t[6]=e("span",null,"Completed",-1))]),e("div",oe,[e("button",{onClick:t[4]||(t[4]=d=>a("close")),class:"cursor-pointer px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"},"Cancel"),e("button",{onClick:u,disabled:!p.value&&!i.value,class:"cursor-pointer px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},b(g.todo?"Update":"Add"),9,se)])])]))}},le={class:"flex items-center justify-between p-4 bg-white border-t border-gray-200"},ae={class:"text-xs text-gray-500 mb-2"},re={class:"isolate justify-end inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},ie=["disabled"],ue=["onClick"],de=["disabled"],ce={__name:"Pagination",props:{pagination:Object},emits:["page-change"],setup(n,{emit:c}){const g=n,a=c,p=h(!1);Z(()=>{const u=()=>{p.value=window.innerWidth<640};return u(),window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}});const i=S(()=>{const u=g.pagination?.current_page||1,o=g.pagination?.last_page||1,t=0,d=[];let k=Math.max(2,u-t),$=Math.min(o-1,u+t);d.push(1),k>2&&d.push("...");for(let C=k;C<=$;C++)d.push(C);return $<o-1&&d.push("..."),o>1&&d.push(o),d});function v(u){u>=1&&u<=g.pagination?.last_page&&a("page-change",u)}return(u,o)=>(l(),r("div",le,[e("div",ae,b(n.pagination.from)+" to "+b(n.pagination.to)+" out of "+b(n.pagination.total)+" items ",1),e("nav",re,[e("button",{onClick:o[0]||(o[0]=t=>v(n.pagination.current_page-1)),disabled:n.pagination.current_page===1,class:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50"},[o[2]||(o[2]=e("span",{class:"sr-only"},"Previous",-1)),x(w(R),{class:"size-5","aria-hidden":"true"})],8,ie),p.value?y("",!0):(l(!0),r(z,{key:0},B(i.value,t=>(l(),r("button",{key:t,onClick:d=>v(t),class:L(["relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-gray-300 focus:z-20 focus:outline-offset-0",t===n.pagination.current_page?"z-10 bg-green-500 text-white focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600":"text-gray-900 hover:bg-gray-50"])},b(t),11,ue))),128)),e("button",{onClick:o[1]||(o[1]=t=>v(n.pagination.current_page+1)),disabled:n.pagination.current_page===n.pagination.last_page,class:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50"},[o[3]||(o[3]=e("span",{class:"sr-only"},"Next",-1)),x(w(W),{class:"size-5","aria-hidden":"true"})],8,de)])]))}},pe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 relative"},ge={class:"relative w-full sm:w-2/3"},ve={__name:"SearchFilter",props:{searchQuery:String,statusFilter:String},emits:["update:searchQuery","update:statusFilter"],setup(n,{emit:c}){const g=n,a=c,p=h(g.searchQuery),i=h(g.statusFilter);M(p,u=>{a("update:searchQuery",u)}),M(i,u=>{a("update:statusFilter",u)});function v(){p.value=""}return(u,o)=>(l(),r("div",pe,[e("div",ge,[_(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t),type:"text",placeholder:"Search by title or description...",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[F,p.value]]),p.value?(l(),r("button",{key:0,onClick:v,class:"cursor-pointer absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," ✕ ")):y("",!0)]),_(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>i.value=t),class:"w-full sm:w-1/3 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"},[...o[2]||(o[2]=[e("option",{value:""},"All",-1),e("option",{value:"1"},"Completed",-1),e("option",{value:"0"},"Pending",-1)])],512),[[N,i.value]])]))}},fe={class:"relative"},me={key:0,class:"absolute top-full right-0 mt-2 bg-white shadow-md rounded-md z-50 p-4 w-48"},he={class:"mb-4"},xe={class:"text-sm font-bold text-gray-700"},be={class:"text-sm text-gray-500"},ye={__name:"ProfileDropdown",props:{user:{type:Object,required:!0}},emits:["logout"],setup(n,{emit:c}){const g=c,a=h(!1);function p(){a.value=!a.value}function i(){g("logout"),a.value=!1}return(v,u)=>(l(),r("div",fe,[e("button",{onClick:p,class:"cursor-pointer flex text-gray-500 pr-4 pl-3 py-2 rounded-lg hover:bg-gray-100"},[x(w(X),{class:"w-5 h-5 mt-0.5 mr-1 text-gray-500"}),Q(b(n.user.name),1)]),a.value?(l(),r("div",me,[e("div",he,[e("p",xe,b(n.user.name),1),e("p",be,b(n.user.email),1)]),e("button",{onClick:i,class:"cursor-pointer block w-full py-2 text-sm text-left text-red-600 hover:bg-gray-100"}," Log Out ")])):y("",!0)]))}},we={class:"w-7/10 mx-auto mt-5"},ke={class:"flex justify-between items-center mb-4"},_e={key:0,class:"flex items-center justify-end mb-4"},Ce={key:1,class:"flex justify-center items-center h-20"},$e={key:2,class:"space-y-3"},Se={key:0,class:"text-center text-black mt-4"},Me={key:0},Te={key:1},je=["onClick"],Fe={class:"flex items-center space-x-3 flex-1 overflow-hidden cursor-pointer"},Ve=["checked","onChange"],ze=["onClick"],Pe=["onClick"],Ze={key:3,class:"mt-4"},Le={__name:"TodoList",setup(n){const c=h(!1),g=h(null);h(!1);const a=D(),p=J(),i=S(()=>a.state.todos.data),v=S(()=>a.state.todos.meta),u=S(()=>a.state.todos.loading),o=h(""),t=h(""),d=h(10);M([o,t,d],()=>{k(1)}),Z(()=>{a.dispatch("getTodos").then(()=>{})});function k(m){const s={page:m,search:o.value,completed:t.value,per_page:d.value};a.dispatch("getTodos",s)}function $(m){const s=i.value[m].id;a.dispatch("deleteTodo",s)}function C(m){g.value=i.value[m],c.value=!0}function U(){g.value=null,c.value=!0}function I(m){m.id?a.dispatch("updateTodo",m):a.dispatch("addTodo",m),c.value=!1}function P(m){const s={...m,completed:!m.completed};a.dispatch("updateTodo",s)}const O=JSON.parse(localStorage.getItem("user"));function A(){localStorage.removeItem("user"),localStorage.removeItem("token"),p.push("/login")}function E(){o.value="",t.value="",k(1)}return(m,s)=>(l(),r(z,null,[e("div",we,[e("div",ke,[e("h1",{class:"text-2xl font-bold text-center text-green-700 cursor-pointer",onClick:s[0]||(s[0]=f=>E())}," Todo List "),x(ye,{user:w(O),onLogout:A},null,8,["user"])]),x(ve,{searchQuery:o.value,"onUpdate:searchQuery":s[1]||(s[1]=f=>o.value=f),statusFilter:t.value,"onUpdate:statusFilter":s[2]||(s[2]=f=>t.value=f)},null,8,["searchQuery","statusFilter"]),i.value.length>0?(l(),r("div",_e,[s[7]||(s[7]=e("label",{for:"perPage",class:"mr-2 text-sm text-gray-600"},"Items per page:",-1)),_(e("select",{id:"perPage","onUpdate:modelValue":s[3]||(s[3]=f=>d.value=f),class:"px-2 justify-center py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500"},[...s[6]||(s[6]=[e("option",{value:"5"},"5",-1),e("option",{value:"10"},"10",-1),e("option",{value:"25"},"25",-1),e("option",{value:"50"},"50",-1)])],512),[[N,d.value]])])):y("",!0),u.value?(l(),r("div",Ce,[...s[8]||(s[8]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-green-500"},null,-1)])])):(l(),r("div",$e,[i.value.length===0?(l(),r("div",Se,[o.value||t.value?(l(),r("span",Me,"No results found.")):(l(),r("span",Te,"You have no Todos yet."))])):y("",!0),(l(!0),r(z,null,B(i.value,(f,T)=>(l(),r("div",{key:T,class:"flex items-center justify-between bg-white shadow p-4 rounded-lg",onClick:j=>P(f)},[e("div",Fe,[e("input",{type:"checkbox",checked:f.completed,onChange:V(j=>P(f),["stop"]),class:"form-checkbox h-5 w-5 text-green-500 flex-shrink-0 cursor-pointer"},null,40,Ve),e("span",{class:L(["truncate w-full",{"line-through text-gray-400":f.completed,"text-gray-800":!f.completed}])},b(f.title),3)]),e("div",{class:"flex space-x-1 flex-shrink-0",onClick:s[4]||(s[4]=V(()=>{},["stop"]))},[e("button",{onClick:j=>C(T),class:"text-gray-500 hover:text-gray-700 cursor-pointer pl-2",title:"Edit task"},[x(w(Y),{class:"w-5 h-5"})],8,ze),e("button",{onClick:j=>$(T),class:"text-gray-500 hover:text-gray-700 cursor-pointer",title:"Delete task"},[x(w(K),{class:"w-5 h-5"})],8,Pe)])],8,je))),128))])),e("button",{onClick:U,class:"flex font-bold cursor-pointer fixed bottom-5 right-5 px-4 py-4 pr-5 bg-green-500 text-white rounded-full shadow-lg hover:bg-green-600"},[x(w(G),{class:"w-6 h-6 pr-1"}),s[9]||(s[9]=Q(" New Todo ",-1))]),i.value.length>0?(l(),r("div",Ze,[x(ce,{pagination:v.value,onPageChange:k},null,8,["pagination"])])):y("",!0)]),c.value?(l(),q(ne,{key:0,todo:g.value,onSubmit:I,onClose:s[5]||(s[5]=f=>c.value=!1)},null,8,["todo"])):y("",!0)],64))}};export{Le as default};
