<template>
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 relative">
    <div class="relative w-full sm:w-2/3">
      <input
        v-model="localSearchQuery"
        type="text"
        placeholder="Search by title or description..."
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
      />
      <button
        v-if="localSearchQuery"
        @click="clearSearch"
        class="cursor-pointer absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
      >
        âœ•
      </button>
    </div>

    <select
      v-model="localStatusFilter"
      class="w-full sm:w-1/3 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
    >
      <option value="">All</option>
      <option value="1">Completed</option>
      <option value="0">Pending</option>
    </select>

    <!-- Category Filter -->
    <div class="mb-4 flex items-center gap-2">
      <label for="categoryFilter" class="text-sm text-gray-600">Category:</label>
      <select
        id="categoryFilter"
        v-model="localCategoryFilter"
        class="px-2 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500"
      >
        <option value="">All</option>
        <option value="HomeWork">HomeWork</option>
        <option value="Housework">Housework</option>
        <option value="Work">Work</option>
        <option value="Personal">Personal</option>
        <option value="Errands">Errands</option>
      </select>
    </div>
  </div>
</template>

<script setup>
import { ref, watch } from 'vue';

const props = defineProps({
  searchQuery: String,
  statusFilter: String,
  categoryFilter: String,
});

const emit = defineEmits(['update:searchQuery', 'update:statusFilter', 'update:categoryFilter']);

const localSearchQuery = ref(props.searchQuery);
const localStatusFilter = ref(props.statusFilter);
const localCategoryFilter = ref(props.categoryFilter);

watch(localCategoryFilter, (newValue) => {
  emit('update:categoryFilter', newValue);
});

watch(localSearchQuery, (newValue) => {
  emit('update:searchQuery', newValue);
});

watch(localStatusFilter, (newValue) => {
  emit('update:statusFilter', newValue);
});

function clearSearch() {
  localSearchQuery.value = '';
}
</script>
